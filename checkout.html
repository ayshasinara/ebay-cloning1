<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="./style/checkout.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Roboto:wght@100;300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://use.fontawesome.com/29fa0540bd.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div id="container-checkout">
      <div id="part1">
        <div id="checkout-items"></div>
        <div><h3>Ship to</h3></div>
        <div class="mb2">
          <form action="">
            <div>
              <select name="" id="">
                <option value="United States">United States</option>
                <option value="India">India</option>
              </select>
            </div>
            <div>
              <input type="text" placeholder="First name" />
              <input type="text" placeholder="Last name" />
            </div>

            <div>
              <input type="text" placeholder="Street address" />
              <input type="text" placeholder="Street address(Optional)" />
            </div>
            <div id="input3">
              <input type="text" placeholder="City" />
              <input type="text" placeholder="State/Province/Region" />
              <input type="text" placeholder="ZIP Code" />
            </div>
            <div>
              <input type="email" name="" id="" placeholder="email" />
              <input type="email" name="" id="" placeholder="Confirm email" />
            </div>
            <div>
              <input type="text" name="" id="" placeholder="Country Code" />
              <input
                type="text"
                name=""
                id=""
                placeholder="Phone number(required)"
              />
            </div>
            <button id="done-btn">Done</button>
          </form>
        </div>
        <div class="mb2">
          <h3>Pay with</h3>
          <div>
            <input type="radio" id="html" name="fav_language" value="HTML" />
              <label for="html">Add new card</label>
          </div>
          <div>
            <input type="radio" id="css" name="fav_language" value="CSS" />
              <label for="css">Paypal</label>
          </div>
          <div>
            <input
              type="radio"
              id="javascript"
              name="fav_language"
              value="JavaScript"
            />
              <label for="javascript">Paypal Credit</label>
          </div>
        </div>
        <div>Add Coupons</div>
      </div>
      <div id="part2">
        <div class="subtotal">
          <p>Subtotal(1 item)</p>
          <p id="totalItemsPrice">US $143</p>
        </div>
        <div>
          <div class="subtotal">
            <p>Shipping</p>
            <p id="shippingCharges">Free</p>
          </div>
          <hr />
          <div class="subtotal">
            <h4>Order total</h4>
            <h4 id="totalPriceToPay">US $143.45</h4>
          </div>
          <button id="ttl-btn">
            <span><i class="fa fa-lock"></i> </span> Confirm and pay
          </button>
          <p class="text-center">Enter Shipping address</p>
        </div>
      </div>
      <div id="help">
        <p>Help</p>
        <div id="q-mark"><i class="fa fas fa-question"></i></div>
      </div>
    </div>
  </body>
</html>
<script>
  let items = JSON.parse(localStorage.getItem("cart"));
  console.log(items);
  items.map((elem) => {
    let main = document.getElementById("checkout-items");
    let card = document.createElement("div");
    card.id = "product-card";
    let img = document.createElement("img");
    img.src = elem.productImageURL;
    let title = document.createElement("p");
    title.textContent = elem.productTitle;
    let price = document.createElement("h6");
    price.textContent = `Price : $ ${elem.productPrice.toFixed(2)}`;

    let shippingCharges = document.createElement("h6");

    shippingCharges.textContent = `Shipping : $ ${elem.shippingCharges.toFixed(
      2
    )}`;

    // let btn = document.createElement("button");
    // btn.textContent = "Add to cart";
    // btn.addEventListener("click", () => {
    //   console.log("clicked");
    //   cart.push(elem);
    //   localStorage.setItem("cart", JSON.stringify(cart));
    // });

    card.append(img, title, price, shippingCharges);
    main.append(card);
  });

  let totalprice = items.reduce((ac, cv) => {
    // console.log(ac, cv.price);
    return ac + cv.productPrice;
  }, 0);

  let totalShippingPrice = items.reduce((ac, cv) => {
    // console.log(ac, cv.price);
    return ac + cv.shippingCharges;
  }, 0);

  console.log(totalShippingPrice);
  // console.log(totalprice);
  let priceBtn = document.getElementById("totalPriceToPay");
  priceBtn.textContent = `$ ${totalprice + totalShippingPrice}`;

  let shippingChargesBtn = document.getElementById("shippingCharges");
  shippingChargesBtn.textContent = `$ ${totalShippingPrice}`;

  let totalItemsPrice = document.getElementById("totalItemsPrice");
  totalItemsPrice.textContent = `$ ${totalprice}`;

  let confirm_btn = document.getElementById("ttl-btn");

  confirm_btn.addEventListener("click", () => {
    alert("Order Successfully Placed !");
  });
</script>
